<div class="flex justify-center mt-[35px] px-4">
  <div class="w-full max-w-[800px] flex flex-col items-center gap-7">
    <h1
      class="text-3xl font-semibold title-h1 tracking-[3px] leading-[90px] text-center text-[#524139ff]"
    >
      My Account
    </h1>

    <mat-tab-group class="w-full">
      <mat-tab label="Personal Information">
        <div
          *ngIf="customer() as customerResult"
          class="bg-white shadow-lg rounded-2xl p-8 flex flex-col gap-6"
        >
          <div
            class="grid grid-cols-1 sm:grid-cols-2 gap-6 border rounded-xl p-4 shadow-sm bg-gradient-to-r from-[#3F2F2A] from-45% via-[#7C573C] via-65% to-[#5F4431] to-90%"
          >
            <div>
              <p class="text-sm text-[#DABB9E] text-[15px] max-w-[410px]">First Name</p>
              <ng-container *ngIf="!isEditMode">
                <p class="text-base text-[#ffffff] text-[20px]">{{ currentCustomer?.firstName }}</p>
              </ng-container>
            </div>
            <div>
              <p class="text-sm text-[#DABB9E] text-[15px] max-w-[410px]">Last Name</p>
              <ng-container *ngIf="!isEditMode">
                <p class="text-base text-[#ffffff] text-[20px]">{{ currentCustomer?.lastName }}</p>
              </ng-container>
            </div>
            <div>
              <p class="text-sm text-[#DABB9E] text-[15px] max-w-[410px]">Email</p>
              <ng-container *ngIf="!isEditMode">
                <p class="text-base text-[#ffffff] text-[20px]">{{ currentCustomer?.email }}</p>
              </ng-container>
            </div>
            <div>
              <p class="text-sm text-[#DABB9E] text-[15px] max-w-[410px]">Date of Birth</p>
              <ng-container *ngIf="!isEditMode">
                <p class="text-base text-[#ffffff] text-[20px]">{{ formattedDateOfBirth }}</p>
              </ng-container>
            </div>
          </div>
        </div>
      </mat-tab>

      <mat-tab label="Addresses">
        <div
          *ngIf="customer() as customerResult"
          class="bg-white shadow-lg rounded-2xl p-8 flex flex-col gap-6"
        >
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            <div
              class="border rounded-xl p-4 shadow-sm flex flex-col gap-2 bg-gradient-to-r from-[#3F2F2A] from-25% via-[#7C573C] via-65% to-[#5F4431] to-90% mt-6"
            >
              <h3 class="text-lg font-semibold mb-2 text-[#ffffff]">
                Shipping Address
                <ng-container *ngIf="!isEditMode">
                  <span
                    *ngIf="isDefaultShipping"
                    class="ml-2 text-xs bg-[#DABB9E] text-black px-2 py-1 rounded-full"
                    >default</span
                  >
                </ng-container>
                <ng-container *ngIf="isEditMode">
                  <mat-checkbox
                    color="accent"
                    [checked]="isDefaultShippingEdit()"
                    (change)="setDefaultShipping($event.checked)"
                    class="ml-4 text-[#DABB9E]"
                  >
                    Default
                  </mat-checkbox>
                </ng-container>
              </h3>

              <ng-template #readonlyShipping>
                <div class="p-2">
                  <p class="text-sm text-[#DABB9E]">Street</p>
                  <p class="text-base text-white text-[20px]">{{ shippingAddress.streetName }}</p>
                </div>
                <div class="p-2">
                  <p class="text-sm text-[#DABB9E]">City</p>
                  <p class="text-base text-white text-[20px]">{{ shippingAddress.city }}</p>
                </div>
                <div class="p-2">
                  <p class="text-sm text-[#DABB9E]">Postal Code</p>
                  <p class="text-base text-white text-[20px]">{{ shippingAddress.postalCode }}</p>
                </div>
                <div class="p-2">
                  <p class="text-sm text-[#DABB9E]">Country</p>
                  <p class="text-base text-white text-[20px]">{{ shippingAddress.country }}</p>
                </div>
              </ng-template>
            </div>
            <!-- Billing Address -->
            <div
              class="border rounded-xl p-4 shadow-sm flex flex-col gap-2 bg-gradient-to-r from-[#3F2F2A] from-25% via-[#7C573C] via-65% to-[#5F4431] to-90% mt-6"
            >
              <h3 class="text-lg font-semibold mb-2 text-[#ffffff]">
                Billing Address
                <ng-container *ngIf="!isEditMode">
                  <span
                    *ngIf="isDefaultBilling"
                    class="ml-2 text-xs bg-[#DABB9E] text-black px-2 py-1 rounded-full"
                    >default</span
                  >
                </ng-container>
                <ng-container *ngIf="isEditMode">
                  <mat-checkbox
                    color="accent"
                    [checked]="isDefaultBillingEdit()"
                    (change)="setDefaultBilling($event.checked)"
                    class="ml-4 text-[#DABB9E]"
                  >
                    Default
                  </mat-checkbox>
                </ng-container>
              </h3>

              <ng-template #readonlyBilling>
                <div class="p-2">
                  <p class="text-sm text-[#DABB9E]">Street</p>
                  <p class="text-base text-white text-[20px]">{{ billingAddress.streetName }}</p>
                </div>
                <div class="p-2">
                  <p class="text-sm text-[#DABB9E]">City</p>
                  <p class="text-base text-white text-[20px]">{{ billingAddress.city }}</p>
                </div>
                <div class="p-2">
                  <p class="text-sm text-[#DABB9E]">Postal Code</p>
                  <p class="text-base text-white text-[20px]">{{ billingAddress.postalCode }}</p>
                </div>
                <div class="p-2">
                  <p class="text-sm text-[#DABB9E]">Country</p>
                  <p class="text-base text-white text-[20px]">{{ billingAddress.country }}</p>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Secure information">
        <div *ngIf="customer() as customerResult" class="bg-white shadow-lg rounded-2xl p-8">
          <div
            class="grid grid-cols-1 sm:grid-cols-2 gap-6 border rounded-xl p-4 shadow-sm bg-gradient-to-r from-[#3F2F2A] from-45% via-[#7C573C] via-65% to-[#5F4431] to-90%"
          >
            <div>
              <p class="text-sm text-[#DABB9E] text-[15px] max-w-[410px]">Password</p>
              <p class="text-base text-[#ffffff] text-[20px]">
                {{ customerResult.customer.password }}
              </p>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>

    <div class="flex flex-wrap justify-center gap-6 mt-0">
      <button
        *ngIf="!isEditMode"
        mat-raised-button
        color="primary"
        class="bg-[#3F2F2A] hover:bg-[#7e4727] text-white py-3 px-6 rounded-lg transition"
      >
        My Card
      </button>
      <button
        *ngIf="isEditMode"
        mat-raised-button
        color="warn"
        (click)="cancelEdit()"
        class="bg-[#6B3C21] text-white py-3 px-6 rounded-lg transition"
      >
        Cancel
      </button>

      <button
        *ngIf="!isEditMode"
        mat-stroked-button
        color="warn"
        (click)="openModal()"
        class="py-3 px-6 rounded-lg border border-[#6B3C21] text-[#6B3C21] hover:bg-[#E0A872] transition"
      >
        Edit
      </button>
      <button
        *ngIf="isEditMode"
        mat-stroked-button
        color="primary"
        (click)="saveChanges()"
        class="py-3 px-6 rounded-lg border border-[#3F2F2A] text-[#3F2F2A] hover:bg-[#E0A872] transition"
      >
        Save
      </button>
    </div>
  </div>
</div>
